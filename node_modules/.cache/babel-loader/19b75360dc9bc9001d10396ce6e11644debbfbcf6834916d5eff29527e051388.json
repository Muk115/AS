{"ast":null,"code":"var _jsxFileName = \"/workspaces/codespaces-blank/affinidi-capstone/src/components/Header.js\",\n  _s = $RefreshSig$();\n// Header.js\nimport React, { useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport UserContext from '../contexts/UserContext';\nimport { AffinidiLoginButton, useAffinidiProfile } from '@affinidi/affinidi-react-auth';\nimport './Header.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Header = ({\n  cartItemsCount\n}) => {\n  _s();\n  const {\n    setProfile\n  } = useContext(UserContext);\n  const {\n    isLoading,\n    error,\n    profile,\n    handleLogout\n  } = useAffinidiProfile({\n    authCompleteUrl: '/api/affinidi-auth/complete'\n  });\n  const logout = () => {\n    handleLogout();\n    window.location.href = \"/\";\n  };\n  const renderLoginState = () => {\n    if (isLoading) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 14\n      }, this);\n    }\n    if (error) {\n      handleLogout();\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Unable to load user data. Please try again later.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this);\n    }\n    if (profile) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Welcome, \", profile.givenName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: logout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(AffinidiLoginButton, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 12\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    className: \"Header\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"StackShop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      children: [renderLoginState(), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/cart\",\n        className: \"CartIcon\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/cart.png\",\n          alt: \"Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), cartItemsCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"CartCount\",\n          children: cartItemsCount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 34\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n_s(Header, \"x4uSwKw6on/O8qmMiqFCZfA1HZE=\", false, function () {\n  return [useAffinidiProfile];\n});\n_c = Header;\nexport default Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["React","useContext","Link","UserContext","AffinidiLoginButton","useAffinidiProfile","jsxDEV","_jsxDEV","Header","cartItemsCount","_s","setProfile","isLoading","error","profile","handleLogout","authCompleteUrl","logout","window","location","href","renderLoginState","children","fileName","_jsxFileName","lineNumber","columnNumber","givenName","onClick","className","to","src","alt","_c","$RefreshReg$"],"sources":["/workspaces/codespaces-blank/affinidi-capstone/src/components/Header.js"],"sourcesContent":["// Header.js\nimport React, { useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport UserContext from '../contexts/UserContext';\nimport { AffinidiLoginButton, useAffinidiProfile } from '@affinidi/affinidi-react-auth';\nimport './Header.css';\n\nconst Header = ({ cartItemsCount }) => {\n  const { setProfile } = useContext(UserContext);\n  const { isLoading, error, profile, handleLogout } = useAffinidiProfile({\n    authCompleteUrl: '/api/affinidi-auth/complete'\n  });\n\n  const logout = () => {\n    handleLogout();\n    window.location.href = \"/\";\n  };\n\n  const renderLoginState = () => {\n    if (isLoading) {\n      return <p>Loading...</p>;\n    }\n\n    if (error) {\n      handleLogout();\n      return (\n        <div>\n          <p>Unable to load user data. Please try again later.</p>\n        </div>\n      );\n    }\n    if (profile) {\n      return (\n        <div>\n          <span>Welcome, {profile.givenName}</span>\n          <button onClick={logout}>Logout</button>\n        </div>\n      );\n    }\n\n    return <AffinidiLoginButton />;\n  };\n\n  return (\n    <header className=\"Header\">\n      <Link to=\"/\">\n        <h1>StackShop</h1>\n      </Link>\n      <nav>\n        {renderLoginState()}\n        <Link to=\"/cart\" className=\"CartIcon\">\n          <img src=\"/cart.png\" alt=\"Cart\" />\n          {cartItemsCount > 0 && <span className=\"CartCount\">{cartItemsCount}</span>}\n        </Link>\n      </nav>\n    </header>\n  );\n};\n\nexport default Header;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,SAASC,IAAI,QAAQ,kBAAkB;AACvC,OAAOC,WAAW,MAAM,yBAAyB;AACjD,SAASC,mBAAmB,EAAEC,kBAAkB,QAAQ,+BAA+B;AACvF,OAAO,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtB,MAAMC,MAAM,GAAGA,CAAC;EAAEC;AAAe,CAAC,KAAK;EAAAC,EAAA;EACrC,MAAM;IAAEC;EAAW,CAAC,GAAGV,UAAU,CAACE,WAAW,CAAC;EAC9C,MAAM;IAAES,SAAS;IAAEC,KAAK;IAAEC,OAAO;IAAEC;EAAa,CAAC,GAAGV,kBAAkB,CAAC;IACrEW,eAAe,EAAE;EACnB,CAAC,CAAC;EAEF,MAAMC,MAAM,GAAGA,CAAA,KAAM;IACnBF,YAAY,CAAC,CAAC;IACdG,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG;EAC5B,CAAC;EAED,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,IAAIT,SAAS,EAAE;MACb,oBAAOL,OAAA;QAAAe,QAAA,EAAG;MAAU;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAC1B;IAEA,IAAIb,KAAK,EAAE;MACTE,YAAY,CAAC,CAAC;MACd,oBACER,OAAA;QAAAe,QAAA,eACEf,OAAA;UAAAe,QAAA,EAAG;QAAiD;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrD,CAAC;IAEV;IACA,IAAIZ,OAAO,EAAE;MACX,oBACEP,OAAA;QAAAe,QAAA,gBACEf,OAAA;UAAAe,QAAA,GAAM,WAAS,EAACR,OAAO,CAACa,SAAS;QAAA;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACzCnB,OAAA;UAAQqB,OAAO,EAAEX,MAAO;UAAAK,QAAA,EAAC;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrC,CAAC;IAEV;IAEA,oBAAOnB,OAAA,CAACH,mBAAmB;MAAAmB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAChC,CAAC;EAED,oBACEnB,OAAA;IAAQsB,SAAS,EAAC,QAAQ;IAAAP,QAAA,gBACxBf,OAAA,CAACL,IAAI;MAAC4B,EAAE,EAAC,GAAG;MAAAR,QAAA,eACVf,OAAA;QAAAe,QAAA,EAAI;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACd,CAAC,eACPnB,OAAA;MAAAe,QAAA,GACGD,gBAAgB,CAAC,CAAC,eACnBd,OAAA,CAACL,IAAI;QAAC4B,EAAE,EAAC,OAAO;QAACD,SAAS,EAAC,UAAU;QAAAP,QAAA,gBACnCf,OAAA;UAAKwB,GAAG,EAAC,WAAW;UAACC,GAAG,EAAC;QAAM;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,EACjCjB,cAAc,GAAG,CAAC,iBAAIF,OAAA;UAAMsB,SAAS,EAAC,WAAW;UAAAP,QAAA,EAAEb;QAAc;UAAAc,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEb,CAAC;AAAChB,EAAA,CAlDIF,MAAM;EAAA,QAE0CH,kBAAkB;AAAA;AAAA4B,EAAA,GAFlEzB,MAAM;AAoDZ,eAAeA,MAAM;AAAC,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}